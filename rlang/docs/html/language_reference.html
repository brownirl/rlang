<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RLang Language Reference &mdash; RLang 1.0.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/rtd_sphinx_search.min.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/js/rtd_sphinx_search.min.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="RLang Package" href="rlang.html" />
    <link rel="prev" title="Working with RLang" href="using_rlang.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html">
            <img src="_static/RLang_logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                master
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Package Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_rlang.html">Working with RLang</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">RLang Language Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#structure-of-an-rlang-program">Structure of an RLang Program</a></li>
<li class="toctree-l2"><a class="reference internal" href="#syntax-of-rlang-groundings">Syntax of RLang Groundings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#constants">Constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="#actions">Actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#factors">Factors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#features">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#propositions">Propositions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#goals">Goals</a></li>
<li class="toctree-l3"><a class="reference internal" href="#markov-features">Markov Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#policies">Policies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#options">Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#action-restrictions">Action Restrictions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#effects">Effects</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#expressions-and-keywords">Expressions and Keywords</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#arithmetic-expressions">Arithmetic Expressions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#boolean-expressions">Boolean Expressions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#conditional-expressions">Conditional Expressions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#probabilistic-expressions">Probabilistic Expressions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#special-variables">Special Variables</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rlang.html">RLang Package</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">RLang</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>RLang Language Reference</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/language_reference.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="rlang-language-reference">
<h1><a class="toc-backref" href="#id4">RLang Language Reference</a><a class="headerlink" href="#rlang-language-reference" title="Permalink to this headline"></a></h1>
<p>This page covers the core syntax and semantics of the RLang language.</p>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#rlang-language-reference" id="id4">RLang Language Reference</a></p>
<ul>
<li><p><a class="reference internal" href="#structure-of-an-rlang-program" id="id5">Structure of an RLang Program</a></p></li>
<li><p><a class="reference internal" href="#syntax-of-rlang-groundings" id="id6">Syntax of RLang Groundings</a></p>
<ul>
<li><p><a class="reference internal" href="#constants" id="id7">Constants</a></p></li>
<li><p><a class="reference internal" href="#actions" id="id8">Actions</a></p></li>
<li><p><a class="reference internal" href="#factors" id="id9">Factors</a></p></li>
<li><p><a class="reference internal" href="#features" id="id10">Features</a></p></li>
<li><p><a class="reference internal" href="#propositions" id="id11">Propositions</a></p></li>
<li><p><a class="reference internal" href="#goals" id="id12">Goals</a></p></li>
<li><p><a class="reference internal" href="#markov-features" id="id13">Markov Features</a></p></li>
<li><p><a class="reference internal" href="#policies" id="id14">Policies</a></p></li>
<li><p><a class="reference internal" href="#options" id="id15">Options</a></p></li>
<li><p><a class="reference internal" href="#action-restrictions" id="id16">Action Restrictions</a></p></li>
<li><p><a class="reference internal" href="#effects" id="id17">Effects</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#expressions-and-keywords" id="id18">Expressions and Keywords</a></p>
<ul>
<li><p><a class="reference internal" href="#arithmetic-expressions" id="id19">Arithmetic Expressions</a></p></li>
<li><p><a class="reference internal" href="#boolean-expressions" id="id20">Boolean Expressions</a></p></li>
<li><p><a class="reference internal" href="#conditional-expressions" id="id21">Conditional Expressions</a></p></li>
<li><p><a class="reference internal" href="#probabilistic-expressions" id="id22">Probabilistic Expressions</a></p></li>
<li><p><a class="reference internal" href="#special-variables" id="id23">Special Variables</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<section id="structure-of-an-rlang-program">
<h2><a class="toc-backref" href="#id5">Structure of an RLang Program</a><a class="headerlink" href="#structure-of-an-rlang-program" title="Permalink to this headline"></a></h2>
<p>An RLang program has the following structure:</p>
<pre>
<strong id="grammar-token-program">program</strong> ::=  import* declaration*
</pre>
<p>where each import statement imports a local vocabulary file (e.g. <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">vocab.json</span></code>) and each declaration is the
instantiation of an RLang grounding:</p>
<pre>
<strong id="grammar-token-declaration">declaration</strong> ::=  constant NL+
                 | action NL+
                 | factor NL+
                 | proposition NL+
                 | goal NL+
                 | feature NL+
                 | markov_feature NL+
                 | option
                 | policy
                 | effect
</pre>
<table class="colwidths-given docutils align-default" id="id3">
<caption><span class="caption-text">The domains and codomains of RLang groundings.</span><a class="headerlink" href="#id3" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head stub"><p>RLang Grounding</p></th>
<th class="head"><p>Domain</p></th>
<th class="head"><p>Codomain</p></th>
<th class="head"><p>Package Documentation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><th class="stub"><p><a class="reference internal" href="#constants">Constants</a></p></th>
<td><p><span class="math notranslate nohighlight">\(\emptyset\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(\mathbb{R}^n\)</span>, list of <span class="math notranslate nohighlight">\(\mathbb{R}^n\)</span></p></td>
<td><p><a class="reference internal" href="rlang.grounding.html#rlang.grounding.groundings.ConstantGrounding" title="rlang.grounding.groundings.ConstantGrounding"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConstantGrounding</span></code></a></p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><a class="reference internal" href="#actions">Actions</a></p></th>
<td><p><span class="math notranslate nohighlight">\(\emptyset\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(\mathcal{A}\)</span></p></td>
<td><p><a class="reference internal" href="rlang.grounding.html#rlang.grounding.groundings.ActionReference" title="rlang.grounding.groundings.ActionReference"><code class="xref py py-class docutils literal notranslate"><span class="pre">ActionReference</span></code></a></p></td>
</tr>
<tr class="row-even"><th class="stub"><p><a class="reference internal" href="#factors">Factors</a></p></th>
<td><p><span class="math notranslate nohighlight">\(\mathcal{S}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(\mathbb{R}^n\)</span></p></td>
<td><p><a class="reference internal" href="rlang.grounding.html#rlang.grounding.groundings.Factor" title="rlang.grounding.groundings.Factor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Factor</span></code></a></p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><a class="reference internal" href="#propositions">Propositions</a></p></th>
<td><p><span class="math notranslate nohighlight">\(\mathcal{S}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(\{\top, \bot\}\)</span></p></td>
<td><p><a class="reference internal" href="rlang.grounding.html#rlang.grounding.groundings.Proposition" title="rlang.grounding.groundings.Proposition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Proposition</span></code></a></p></td>
</tr>
<tr class="row-even"><th class="stub"><p><a class="reference internal" href="#goals">Goals</a></p></th>
<td><p><span class="math notranslate nohighlight">\(\mathcal{S}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(\{\top, \bot\}\)</span></p></td>
<td><p><a class="reference internal" href="rlang.grounding.html#rlang.grounding.groundings.Goal" title="rlang.grounding.groundings.Goal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Goal</span></code></a></p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><a class="reference internal" href="#features">Features</a></p></th>
<td><p><span class="math notranslate nohighlight">\(\mathcal{S}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(\mathbb{R}^n\)</span></p></td>
<td><p><a class="reference internal" href="rlang.grounding.html#rlang.grounding.groundings.Feature" title="rlang.grounding.groundings.Feature"><code class="xref py py-class docutils literal notranslate"><span class="pre">Feature</span></code></a></p></td>
</tr>
<tr class="row-even"><th class="stub"><p><a class="reference internal" href="#markov-features">Markov Features</a></p></th>
<td><p><span class="math notranslate nohighlight">\(\mathcal{S}\times\mathcal{A}\times\mathcal{S}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(\mathbb{R}^n\)</span></p></td>
<td><p><a class="reference internal" href="rlang.grounding.html#rlang.grounding.groundings.MarkovFeature" title="rlang.grounding.groundings.MarkovFeature"><code class="xref py py-class docutils literal notranslate"><span class="pre">MarkovFeature</span></code></a></p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><a class="reference internal" href="#options">Options</a></p></th>
<td><p><span class="math notranslate nohighlight">\(\mathcal{S}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(\mathcal{A}\)</span></p></td>
<td><p><a class="reference internal" href="rlang.grounding.html#rlang.grounding.groundings.Option" title="rlang.grounding.groundings.Option"><code class="xref py py-class docutils literal notranslate"><span class="pre">Option</span></code></a></p></td>
</tr>
<tr class="row-even"><th class="stub"><p><a class="reference internal" href="#policies">Policies</a></p></th>
<td><p><span class="math notranslate nohighlight">\(\mathcal{S}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(\mathcal{A}\)</span></p></td>
<td><p><a class="reference internal" href="rlang.grounding.html#rlang.grounding.groundings.Policy" title="rlang.grounding.groundings.Policy"><code class="xref py py-class docutils literal notranslate"><span class="pre">Policy</span></code></a></p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><a class="reference internal" href="#effects">Effects</a></p></th>
<td><p><span class="math notranslate nohighlight">\(\mathcal{S}\times\mathcal{A}\times\mathcal{S}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(\{\mathcal{S}, \top, \bot, \mathbb{R}^n, R\}\)</span> <a class="footnote-reference brackets" href="#id2" id="id1">*</a></p></td>
<td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Effects</span></code></p></td>
</tr>
</tbody>
</table>
<dl class="footnote brackets">
<dt class="label" id="id2"><span class="brackets"><a class="fn-backref" href="#id1">*</a></span></dt>
<dd><p><span class="math notranslate nohighlight">\(\top, \bot, \mathbb{R}^n\)</span> refer to the potential value of an RLang grounding on the next state. <span class="math notranslate nohighlight">\(R\)</span> refers to a reward.</p>
</dd>
</dl>
</section>
<section id="syntax-of-rlang-groundings">
<h2><a class="toc-backref" href="#id6">Syntax of RLang Groundings</a><a class="headerlink" href="#syntax-of-rlang-groundings" title="Permalink to this headline"></a></h2>
<p>Every RLang grounding is a function with a domain in <span class="math notranslate nohighlight">\(\mathcal{S}\times\mathcal{A}\times\mathcal{S}\)</span>
and a co-domain in <span class="math notranslate nohighlight">\(\mathcal{S}, \mathcal{A}, \mathbb{R}^n\)</span> where <span class="math notranslate nohighlight">\(n\in \mathbb{N}\)</span>, or
<span class="math notranslate nohighlight">\(\{\top, \bot\}\)</span>, depending on the grounding’s type. Each grounding declared in an RLang program grounds to one
or more Python RLang objects which are in the <a class="reference internal" href="rlang.grounding.html#module-rlang.grounding.groundings" title="rlang.grounding.groundings"><code class="xref py py-mod docutils literal notranslate"><span class="pre">groundings</span></code></a> module and are accessible to the user after
parsing using the <a class="reference internal" href="rlang.html#rlang.knowledge.RLangKnowledge" title="rlang.knowledge.RLangKnowledge"><code class="xref py py-class docutils literal notranslate"><span class="pre">RLangKnowledge</span></code></a> class.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Every RLang grounding declared in an program is static. Groundings cannot be re-bound.</p>
</div>
<section id="constants">
<h3><a class="toc-backref" href="#id7">Constants</a><a class="headerlink" href="#constants" title="Permalink to this headline"></a></h3>
<pre>
<strong id="grammar-token-constant">constant</strong> ::=  &quot;Constant&quot; IDENTIFIER &quot;:=&quot; (arithmetic_exp | boolean_exp)
</pre>
<p>Constants can be defined and used later in other RLang groundings.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Constant lava_positions := [[0, 1], [5, 2]]
Constant step_cost := -0.1
</pre></div>
</div>
<p>Constants ground to <a class="reference internal" href="rlang.grounding.html#rlang.grounding.groundings.ConstantGrounding" title="rlang.grounding.groundings.ConstantGrounding"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConstantGrounding</span></code></a>.</p>
</section>
<section id="actions">
<h3><a class="toc-backref" href="#id8">Actions</a><a class="headerlink" href="#actions" title="Permalink to this headline"></a></h3>
<pre>
<strong id="grammar-token-action">action</strong> ::=  &quot;Action&quot; IDENTIFIER &quot;:=&quot; (any_number | any_num_array_exp)
</pre>
<p>Actions can be defined for reference in <a class="reference internal" href="#policies">Policies</a> and <a class="reference internal" href="#options">Options</a>.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Action up := [0, 1]
</pre></div>
</div>
<p>Actions ground to <a class="reference internal" href="rlang.grounding.html#rlang.grounding.groundings.ActionReference" title="rlang.grounding.groundings.ActionReference"><code class="xref py py-class docutils literal notranslate"><span class="pre">ActionReference</span></code></a>.</p>
</section>
<section id="factors">
<h3><a class="toc-backref" href="#id9">Factors</a><a class="headerlink" href="#factors" title="Permalink to this headline"></a></h3>
<pre>
<strong id="grammar-token-factor">factor</strong> ::=  &quot;Factor&quot; IDENTIFIER &quot;:=&quot; any_bound_var
</pre>
<p>Factors are used to reference independent state variables.
They represent portions of the state space and can be defined using Python’s slicing syntax <code class="docutils literal notranslate"><span class="pre">[start?:end?]</span></code> on the
current state variable <code class="docutils literal notranslate"><span class="pre">S</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Factor x_position := S[0]
Factor y_position := S[1]
Factor inventory := S[2:]
</pre></div>
</div>
<p>Factors ground to <a class="reference internal" href="rlang.grounding.html#rlang.grounding.groundings.Factor" title="rlang.grounding.groundings.Factor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Factor</span></code></a>.</p>
</section>
<section id="features">
<h3><a class="toc-backref" href="#id10">Features</a><a class="headerlink" href="#features" title="Permalink to this headline"></a></h3>
<pre>
<strong id="grammar-token-feature">feature</strong> ::=  &quot;Feature&quot; IDENTIFIER &quot;:=&quot; arithmetic_exp
</pre>
<p>Features are used to define more complex functions of state. They can be defined using arithmetic operations
(+, -, <span class="math notranslate nohighlight">\(*\)</span>, /), numeric literals, function compositions.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Feature distance_to_gold := abs([0,4] - position)
</pre></div>
</div>
<p>Features ground to <a class="reference internal" href="rlang.grounding.html#rlang.grounding.groundings.Feature" title="rlang.grounding.groundings.Feature"><code class="xref py py-class docutils literal notranslate"><span class="pre">Feature</span></code></a>.</p>
</section>
<section id="propositions">
<h3><a class="toc-backref" href="#id11">Propositions</a><a class="headerlink" href="#propositions" title="Permalink to this headline"></a></h3>
<pre>
<strong id="grammar-token-proposition">proposition</strong> ::=  &quot;Proposition&quot; IDENTIFIER &quot;:=&quot; boolean_exp
</pre>
<p>Propositions are functions of the form <span class="math notranslate nohighlight">\(\mathcal{S} \rightarrow \{\top, \bot\}\)</span>, generating a boolean value.
They can be defined using logical operators (<code class="docutils literal notranslate"><span class="pre">and</span></code>, <code class="docutils literal notranslate"><span class="pre">or</span></code>, <code class="docutils literal notranslate"><span class="pre">not</span></code>) and order relations of the real numbers
(&lt;, &lt;= , &gt;, &gt;=, =, !=)</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Proposition at_workbench := position in workbench_locations
Proposition have_bridge_material := iron &gt;= 1 and wood &gt;= 1
</pre></div>
</div>
<p>Propositions ground to <a class="reference internal" href="rlang.grounding.html#rlang.grounding.groundings.Proposition" title="rlang.grounding.groundings.Proposition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Proposition</span></code></a>.</p>
</section>
<section id="goals">
<h3><a class="toc-backref" href="#id12">Goals</a><a class="headerlink" href="#goals" title="Permalink to this headline"></a></h3>
<pre>
<strong id="grammar-token-goal">goal</strong> ::=  &quot;Goal&quot; IDENTIFIER &quot;:=&quot; boolean_exp
</pre>
<p>Goals are used to specify goal states given by a proposition.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Goal get_gold := gold &gt;= 1
</pre></div>
</div>
<p>Goals ground to <a class="reference internal" href="rlang.grounding.html#rlang.grounding.groundings.Goal" title="rlang.grounding.groundings.Goal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Goal</span></code></a>.</p>
</section>
<section id="markov-features">
<h3><a class="toc-backref" href="#id13">Markov Features</a><a class="headerlink" href="#markov-features" title="Permalink to this headline"></a></h3>
<pre>
<strong id="grammar-token-markov_feature"><span id="grammar-token-markov-feature"></span>markov_feature</strong> ::=  &quot;MarkovFeature&quot; IDENTIFIER &quot;:=&quot; arithmetic_exp
</pre>
<p>Markov Features allow users to compute features on an (<span class="math notranslate nohighlight">\(s,a,s'\)</span>) experience tuple and can be then used to define
partial specification of functions related to the task, such as action-value functions and transition functions.</p>
<p>The prime operator (<code class="docutils literal notranslate"><span class="pre">'</span></code>) can be used to reference the value of an RLang grounding on the next state.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Markov Feature inventory_change := inventory&#39; - inventory
</pre></div>
</div>
<p>MarkovFeatures ground to <a class="reference internal" href="rlang.grounding.html#rlang.grounding.groundings.MarkovFeature" title="rlang.grounding.groundings.MarkovFeature"><code class="xref py py-class docutils literal notranslate"><span class="pre">MarkovFeature</span></code></a>.</p>
</section>
<section id="policies">
<h3><a class="toc-backref" href="#id14">Policies</a><a class="headerlink" href="#policies" title="Permalink to this headline"></a></h3>
<pre>
<strong id="grammar-token-policy">policy</strong> ::=  &quot;Policy&quot; IDENTIFIER &quot;:&quot; INDENT policy_statement NL* DEDENT
</pre>
<p>Policies prompt the agent to perform an action/subpolicy in a given situation.
The keyword <code class="docutils literal notranslate"><span class="pre">Execute</span></code> is used to perform an action or call another policy. Policies can be specified in RLang using
conditional expressions using the keywords <code class="docutils literal notranslate"><span class="pre">if</span></code>, <code class="docutils literal notranslate"><span class="pre">elif</span></code>, and <code class="docutils literal notranslate"><span class="pre">else</span></code>.</p>
<p>The following policy instructs the agent to craft iron tools at a workbench by first collecting iron and then
navigating to the workbench.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Policy main:
    if iron &gt;= 2:
        if at_workbench:
            Execute Use # Use is an action
        else:
            Execute go_to_workbench # go_to_workbench is a policy
    else:
        Execute collect_iron
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Naming a policy <code class="docutils literal notranslate"><span class="pre">main</span></code> recognizes it as the main policy, which accessed from a <a class="reference internal" href="rlang.html#rlang.knowledge.RLangKnowledge" title="rlang.knowledge.RLangKnowledge"><code class="xref py py-class docutils literal notranslate"><span class="pre">RLangKnowledge</span></code></a> object with <code class="docutils literal notranslate"><span class="pre">knowledge.policy</span></code>. There can only be one <cite>main</cite> policy.</p>
</div>
<p>Policies can be made probabilistic using <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">P(float)</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Policy random_move:
    with P(0.5):
        Execute up
    or with P(0.5):
        Execute down

Policy random_move_syntax_sugar:
    Execute up with P(0.5)
    or Execute down with P(0.5)
</pre></div>
</div>
<p>Policies ground to <a class="reference internal" href="rlang.grounding.html#rlang.grounding.groundings.Policy" title="rlang.grounding.groundings.Policy"><code class="xref py py-class docutils literal notranslate"><span class="pre">Policy</span></code></a>.</p>
</section>
<section id="options">
<h3><a class="toc-backref" href="#id15">Options</a><a class="headerlink" href="#options" title="Permalink to this headline"></a></h3>
<pre>
<strong id="grammar-token-option">option</strong> ::=  &quot;Option&quot; IDENTIFIER &quot;:&quot; INDENT &quot;init&quot; option_condition
             INDENT policy_statement NL* DEDENT
             &quot;until&quot; option_condition NL* DEDENT
</pre>
<p>Temporally-extended abstract actions can be specified using Options, which include initiation and termination
propositions. Initiation propositions are denoted using the keyword <code class="docutils literal notranslate"><span class="pre">init</span></code>, and termination propositions are denoted
using <code class="docutils literal notranslate"><span class="pre">until</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Option build_bridge:
    init have_bridge_material and at_workbench
        Execute craft_bridge
    until bridge in inventory
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">Any</span></code> can also be specified in place of both the <code class="docutils literal notranslate"><span class="pre">init</span></code> and <code class="docutils literal notranslate"><span class="pre">until</span></code> propositions and functions the same as <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</div>
<p>Options ground to <a class="reference internal" href="rlang.grounding.html#rlang.grounding.groundings.Option" title="rlang.grounding.groundings.Option"><code class="xref py py-class docutils literal notranslate"><span class="pre">Option</span></code></a>.</p>
</section>
<section id="action-restrictions">
<h3><a class="toc-backref" href="#id16">Action Restrictions</a><a class="headerlink" href="#action-restrictions" title="Permalink to this headline"></a></h3>
<p>Action Restrictions are used to specify constraints on the set of possible actions an agent can take in a given circumstance.
The keyword <code class="docutils literal notranslate"><span class="pre">Restrict</span></code> removes an action from consideration in the given situation, <em>meaning that the action will have
probability zero even after learning.</em></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ActionRestriction dont_get_burned:
    if (position + [0, 1]) in lava_locations:
        Restrict up
</pre></div>
</div>
</section>
<section id="effects">
<h3><a class="toc-backref" href="#id17">Effects</a><a class="headerlink" href="#effects" title="Permalink to this headline"></a></h3>
<pre>
<strong id="grammar-token-effect">effect          </strong> ::=  &quot;Effect&quot; IDENTIFIER &quot;:&quot; INDENT effect_statement* DEDENT
<strong id="grammar-token-effect_statement"><span id="grammar-token-effect-statement"></span>effect_statement</strong> ::=  reward | prediction | effect_reference
</pre>
<p>Effects provide an interface for specifying partial information about the transition and reward functions,
allowing users to denote the consequences of an action when performed in a given state.</p>
<p>The following effect captures the predicted consequence of moving left on the <code class="docutils literal notranslate"><span class="pre">x_position</span></code> factor,
stating that the <code class="docutils literal notranslate"><span class="pre">x_position</span></code> of the agent in the next state will be less than in the current state.
This Effect also specifies a -0.1 step penalty regardless of the current state or action.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Effect movement_effect:
    if x_position &gt;= 1 and A == left:
        x_position&#39; -&gt; x_position - 1
    Reward -0.1
</pre></div>
</div>
<p>When using a factored MDP, Effects can also be used to specify factored transition functions,
i.e. transition functions for individual factors, which we call <strong>predictions</strong>:</p>
<p>Here is a prediction made about the full transition function:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Effect tic_tac_toe:
    if three_in_a_row:
        S&#39; -&gt; empty_board # Board is reset
</pre></div>
</div>
<p>Effects ground to <a class="reference internal" href="rlang.grounding.html#rlang.grounding.groundings.Effect" title="rlang.grounding.groundings.Effect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Effect</span></code></a>, which holds a <a class="reference internal" href="rlang.grounding.html#rlang.grounding.groundings.TransitionFunction" title="rlang.grounding.groundings.TransitionFunction"><code class="xref py py-class docutils literal notranslate"><span class="pre">TransitionFunction</span></code></a>, a <a class="reference internal" href="rlang.grounding.html#rlang.grounding.groundings.RewardFunction" title="rlang.grounding.groundings.RewardFunction"><code class="xref py py-class docutils literal notranslate"><span class="pre">RewardFunction</span></code></a>,
and a list of <a class="reference internal" href="rlang.grounding.html#rlang.grounding.groundings.Prediction" title="rlang.grounding.groundings.Prediction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Prediction</span></code></a> objects.</p>
</section>
</section>
<section id="expressions-and-keywords">
<h2><a class="toc-backref" href="#id18">Expressions and Keywords</a><a class="headerlink" href="#expressions-and-keywords" title="Permalink to this headline"></a></h2>
<p>RLang provides support for the following expression types.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Restrictions on the kinds of bound variables (i.e. <code class="docutils literal notranslate"><span class="pre">S</span></code> or <code class="docutils literal notranslate"><span class="pre">health</span></code>) usable in the following expressions depends on the domains of the groundings they are used in. E.g. <a class="reference internal" href="#factors">Factors</a> can’t contain <code class="docutils literal notranslate"><span class="pre">A</span></code> or <code class="docutils literal notranslate"><span class="pre">S'</span></code> because they have domain <span class="math notranslate nohighlight">\(\mathcal{S}\)</span>.</p>
</div>
<section id="arithmetic-expressions">
<h3><a class="toc-backref" href="#id19">Arithmetic Expressions</a><a class="headerlink" href="#arithmetic-expressions" title="Permalink to this headline"></a></h3>
<p>Arithmetic expressions are the most common expression used in defining RLang groundings.</p>
<pre>
<strong id="grammar-token-arithmetic_exp"><span id="grammar-token-arithmetic-exp"></span>arithmetic_exp</strong> ::=  L_PAR arithmetic_exp R_PAR
                    | arithmetic_exp (TIMES | DIVIDE) arithmetic_exp
                    | arithmetic_exp (PLUS | MINUS) arithmetic_exp
                    | any_number
                    | any_array
                    | any_bound_var
</pre>
<p>The following arithmetic expression could appear inside a Feature:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(2 * health) - 1 + S[0]
</pre></div>
</div>
</section>
<section id="boolean-expressions">
<h3><a class="toc-backref" href="#id20">Boolean Expressions</a><a class="headerlink" href="#boolean-expressions" title="Permalink to this headline"></a></h3>
<p>Boolean expressions are also commonly used in Propositions, Goals, Effects, Options, and Policies.</p>
<pre>
<strong id="grammar-token-boolean_exp"><span id="grammar-token-boolean-exp"></span>boolean_exp</strong> ::=  L_PAR boolean_exp R_PAR
                 | boolean_exp AND boolean_exp
                 | boolean_exp OR boolean_exp
                 | NOT boolean_exp
                 | arithmetic_exp IN arithmetic_exp
                 | boolean_exp (EQ_TO | NOT_EQ) boolean_exp
                 | arithmetic_exp (EQ_TO | LT | GT |
                    LT_EQ | GT_EQ | NOT_EQ) arithmetic_exp
                 | any_bound_var
                 | (TRUE | FALSE)
</pre>
<p>Examples of boolean expressions:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>True
True and not (at_workbench)
health * 2 == 6
</pre></div>
</div>
</section>
<section id="conditional-expressions">
<h3><a class="toc-backref" href="#id21">Conditional Expressions</a><a class="headerlink" href="#conditional-expressions" title="Permalink to this headline"></a></h3>
<p>The statements usable in a conditional expression differ between Policies and Effects.</p>
<pre>
<strong id="grammar-token-conditional_exp"><span id="grammar-token-conditional-exp"></span>conditional_exp</strong> ::=  IF boolean_exp COL INDENT statement NL* DEDENT
                     (ELIF boolean_exp COL INDENT statement NL* DEDENT)*
                     (ELSE COL INDENT statement NL* DEDENT)?;
</pre>
<p>Some examples of conditional expressions:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>if S[0] == 1 and y_pos == 0:
    Execute stay
elif y_pos &lt; 0:
    Execute up
else:
    Execute down
</pre></div>
</div>
</section>
<section id="probabilistic-expressions">
<h3><a class="toc-backref" href="#id22">Probabilistic Expressions</a><a class="headerlink" href="#probabilistic-expressions" title="Permalink to this headline"></a></h3>
<p>Probabilistic expressions can be used inside <a class="reference internal" href="#policies">Policies</a>, <a class="reference internal" href="#options">Options</a>, and <a class="reference internal" href="#effects">Effects</a>.</p>
<pre>
<strong id="grammar-token-prob_statement"><span id="grammar-token-prob-statement"></span>prob_statement</strong> ::=  prob_condition &quot;:&quot; INDENT statement NL* DEDENT
                    | statement prob_condition NL+
<strong id="grammar-token-prob_condition"><span id="grammar-token-prob-condition"></span>prob_condition</strong> ::=  &quot;with P(&quot; (any_number | integer_fraction) &quot;)&quot;
</pre>
<p>Some examples:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Effect probabilistic_reward:
    with P(0.2):
        Reward 10
    or Reward 1 with P(0.8)

Policy up_or_down:
    Execute up with P(1/2)
    or Execute down with P(1/2)
</pre></div>
</div>
</section>
<section id="special-variables">
<h3><a class="toc-backref" href="#id23">Special Variables</a><a class="headerlink" href="#special-variables" title="Permalink to this headline"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">S</span></code>, <code class="docutils literal notranslate"><span class="pre">A</span></code>, <code class="docutils literal notranslate"><span class="pre">S'</span></code> are reserved keywords referring to the current state, the current action, and the next state, respectively.
Depending on the type an RLang object, one or more of these keywords can be referenced in the definition of the object.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>S   # Current state - Used in Factors and Features
A   # Current action - Used in Effects
S&#39;  # Next state - Used most often in MarkovFeatures
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="using_rlang.html" class="btn btn-neutral float-left" title="Working with RLang" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="rlang.html" class="btn btn-neutral float-right" title="RLang Package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Anonymous.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>